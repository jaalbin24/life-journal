<div class="w-full h-full flex flex-col">
  <div class="bg-slate-700 w-full p-4 flex justify-between">
    <div class="flex flex-col gap-1">
      <h2 class="font-bold"><%=@entry.title%></h2>
      <div class="flex flex-row align-center gap-3">
        <h5 class="my-auto text-gray-400"><%=@entry.published_at.blank? ? "Created #{@entry.created_at.strftime("%b %d, %Y")}" : "Published #{@entry.published_at.strftime("%b %d, %Y")}"%></h5>
        <div class="flex flex-row">
          <%@entry.people.each_with_index do |p, i|%>
            <%=render partial: 'people/avatar', locals: {person: p, css_class: "#{'-ml-2' unless i == 0}", size: 32}%>
          <%end%>
        </div>
      </div>
    </div>
    <div class="flex gap-2 mt-auto">
      <%= link_to 'Edit this entry', edit_entry_path(@entry), class: "btn-primary" %>
      <%= button_to 'Destroy this entry', entry_path(@entry), method: :delete, class: "btn-primary" %>
    </div>
  </div>
  <div class="flex p-3 gap-3 h-full">
    <div class="basis-3/5 card">
      <div class="card-body">
        <%=@entry.text_content%>
      </div>
    </div>
    <div class="basis-2/5 flex flex-col gap-3">
      <div>
        <%if @entry.pictures.count == 0%>
          <div class="border-dashed border-neutral-600 h-full rounded-lg border-2 flex">
            <div class="m-auto">
              <h5 class="text-gray-300">This entry has no pictures.</h5>
            </div>
          </div>
        <%else%>
          <div class="grid grid-cols-2 gap-1" data-controller="fader">
            <%@entry.pictures.each do |p|%>
              <div id="<%=p.id%>-card" class="relative rounded-lg overflow-hidden" data-action="mousemove->fader#fadeIn mouseleave->fader#fadeOut" data-target="<%=p.id%>-fader">
                <button id="<%=p.id%>-fader" class="h-full w-full flex rounded-lg bg-slate-900/70 z-20 absolute hiding opacity-0 transition-opacity delay-200">
                  <div class="m-auto p-3 flex gap-2">
                    <span class="text-center"><%=p.description%></span>
                  </div>
                </button>
                <%= image_tag p.file, class: "h-48 w-full object-cover" %>
              </div>
            <%end%>
          </div>
        </div>
      <%end%>
      <div class="card">
        <div class="card-header">
          <h5 class="font-bold">Lessons</h5>
        </div>
        <div class="card-body">
          <%if @entry.lessons.count == 0%>

          <%else%>
            <div class="flex flex-wrap gap-2">
              <%@entry.lessons.each do |l|%>
                <div class="rounded-lg bg-cyan-800 p-2 max-w-fit basis-1/2 grow flex items-center mb-auto">
                  <span class="font-bold"><%=l.content%></span>
                </div>
              <%end%>
            </div>
          <%end%>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h5 class="font-bold">Milestones</h5>
        </div>
        <div class="card-body">
          <%if @entry.milestones.count == 0%>

          <%else%>
            <div class="flex flex-wrap gap-2">
              <%@entry.milestones.each do |m|%>
                <div class="rounded-lg bg-purple-800 p-2 max-w-fit basis-1/2 grow flex items-center mb-auto">
                  <span><%=m.content%></span>
                </div>
              <%end%>
            </div>
          <%end%>
        </div>
      </div>
    </div>
  </div>
</div>