<div class="w-full h-full flex flex-col">
  <div class="m-4 flex justify-between items-center">
    <div class="flex gap-2 grow">
      <a href="<%=new_person_path%>" class="btn-primary">
        <%= embedded_svg "plus_icon.svg", class: "w-4 h-4" %>
        New person
      </a>
      <% if @query %>
        <h4 class="flex items-center">
          Showing results for<span class="font-bold ml-2">"<%=@query%>"</span>
        </h4>
      <% end %>
    </div>
    <div class="basis-1/3 shrink-0">
      <%= form_with url: search_people_path, method: :get do |f| %>
      <%= f.label "person-search", class: "hidden"%>
        <div class="relative">
          <button class="absolute inset-y-0 left-0 flex items-center pl-3">
            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
            </svg>
          </button>
          <%= f.text_field :query, id: "person-search", type: "search", class: "block w-full p-4 pl-10 text-sm input-field", placeholder: "Search for someone..." %>
        </div>
      <%end%>
    </div>
  </div>
  <div class="p-4 w-full grow">
    <% if !@people.empty? %>
      <div class="grid grid-cols-8 gap-3 shrink">
        <%@people.each do |p|%>
          <a class="card hover:bg-slate-700 transition-all hover:shadow hover:shadow-black/50" href="<%=person_path(p)%>">
            <div class="card-body flex flex-col justify-center items-center gap-2">
              <%= avatar(p, size: 164) %>
              <h5 class="truncate max-w-full font-bold">
                <%= p.name %>
              </h5>
            </div>
          </a>
        <%end%>
      </div>
    <% elsif @query%>
      <div class="flex h-full">
        <h5 class="m-auto text-center">Your search for <span class="font-bold">"<%=@query%>"</span> did not return anything. Try using another keyword.</h5>
      </div>
    <% else %>
      <h5>You do not have any people here. Click <%=link_to "here", new_person_path%> to add one.</h5>
    <% end %>
  </div>
  <div class="mx-auto flex gap-2 pb-10">
    <%= paginate @people%>
    <!--
    <%=link_to "Previous", path_to_prev_page(@people), class: "btn-primary"%>
    <%=link_to "Next", path_to_next_page(@people), class: "btn-primary"%>
    -->
  </div>
</div>
